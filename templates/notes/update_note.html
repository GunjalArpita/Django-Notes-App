<!DOCTYPE html>
<html>
<head>
    <title>Update Note</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="background: linear-gradient(135deg, #f8ffae 0%, #43c6ac 100%); min-height:100vh; display:flex; align-items:center; justify-content:center;">
<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="row w-100 justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow-lg border-0" style="border-radius: 1.5rem; background: rgba(255,255,255,0.97);">
                <div class="card-header bg-gradient bg-warning text-white text-center" style="border-radius: 1.5rem 1.5rem 0 0;">
                    <h2 class="mb-0"><span style="font-size:1.5em;">‚úèÔ∏è</span> Update Note</h2>
                </div>
                <div class="card-body py-4">
                                        {% if message %}
                                            <script>
                                            document.addEventListener('DOMContentLoaded', function() {
                                                var toast = document.createElement('div');
                                                toast.className = 'toast align-items-center text-bg-info border-0 position-fixed start-50 translate-middle-x mt-4';
                                                toast.style.top = '0';
                                                toast.style.zIndex = '9999';
                                                toast.role = 'alert';
                                                toast.ariaLive = 'assertive';
                                                toast.ariaAtomic = 'true';
                                                toast.innerHTML = '<div class="d-flex"><div class="toast-body">{{ message }}</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>';
                                                document.body.appendChild(toast);
                                                var bsToast = new bootstrap.Toast(toast, { delay: 2000 });
                                                bsToast.show();
                                                setTimeout(function() { document.body.removeChild(toast); }, 2200);
                                            });
                                            </script>
                                        {% endif %}
                    <form method="post" id="updateNoteForm" autocomplete="off">
                        {% csrf_token %}
                        <div class="mb-4">
                            <label class="form-label fw-semibold" style="font-size:1.1em;">Title <span style="font-size:1.2em;">üè∑Ô∏è</span></label>
                            <input type="text" name="title" class="form-control form-control-lg text-center" value="{{ note.title }}" required style="border-radius:1rem;">
                        </div>
                        <div class="mb-4">
                            <label class="form-label fw-semibold" style="font-size:1.1em;">Content <span style="font-size:1.2em;">üóíÔ∏è</span></label>
                            <textarea name="content" class="form-control form-control-lg text-center" rows="4" required style="border-radius:1rem;">{{ note.content }}</textarea>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mt-4">
                            <button type="button" class="btn w-50 py-2 fw-bold" style="background: linear-gradient(90deg, #43c6ac 0%, #f8ffae 100%); color:#fff; border:none; border-radius:1rem; font-size:1.1em;" data-bs-toggle="modal" data-bs-target="#confirmUpdateModal">
                                Update <span style="font-size:1.2em;">‚úèÔ∏è</span>
                            </button>
                            <a href="{% url 'notes_list' %}" class="btn btn-secondary w-25 py-2 ms-2" style="border-radius:1rem; font-size:1.1em;">
                                Back <span style="font-size:1.2em;">üîô</span>
                            </a>
                        </div>
                    </form>
                                        <!-- Confirmation Modal -->
                                        <div class="modal fade" id="confirmUpdateModal" tabindex="-1" aria-labelledby="confirmUpdateLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content" style="border-radius:1rem;">
                                                    <div class="modal-header bg-warning text-white" style="border-radius:1rem 1rem 0 0;">
                                                        <h5 class="modal-title" id="confirmUpdateLabel">Confirm Update</h5>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body text-center">
                                                        <span style="font-size:2em;">‚ö†Ô∏è</span>
                                                        <p class="mt-3 mb-0">Are you sure you want to update this note?</p>
                                                    </div>
                                                    <div class="modal-footer justify-content-center" style="border-radius:0 0 1rem 1rem;">
                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                                        <button type="button" class="btn btn-warning" onclick="document.getElementById('updateNoteForm').submit();">Yes, Update</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
