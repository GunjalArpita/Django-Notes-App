<!DOCTYPE html>
<html>
<head>
    <title>Edit Secret Note</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);">
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card shadow-lg border-0" style="background-color: #e3e6f5;">
                <div class="card-header bg-gradient bg-primary text-white text-center">
                    <h2 class="mb-0">‚úèÔ∏è Edit Secret Note</h2>
                </div>
                <div class="card-body">
                    {% if message %}
                        <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            var toast = document.createElement('div');
                            toast.className = 'toast align-items-center text-bg-info border-0 position-fixed start-50 translate-middle-x mt-4';
                            toast.style.top = '0';
                            toast.style.zIndex = '9999';
                            toast.role = 'alert';
                            toast.ariaLive = 'assertive';
                            toast.ariaAtomic = 'true';
                            toast.innerHTML = '<div class="d-flex"><div class="toast-body">{{ message }}</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>';
                            document.body.appendChild(toast);
                            var bsToast = new bootstrap.Toast(toast, { delay: 2000 });
                            bsToast.show();
                            setTimeout(function() { document.body.removeChild(toast); }, 2200);
                        });
                        </script>
                    {% endif %}
                                        <form method="post" id="editSecretNoteForm">
                                                {% csrf_token %}
                                                <div class="mb-3">
                                                        <label class="form-label text-primary">Title</label>
                                                        <input type="text" name="title" class="form-control" value="{{ note.title }}" required>
                                                </div>
                                                <div class="mb-3">
                                                        <label class="form-label text-primary">Content</label>
                                                        <textarea name="content" class="form-control" rows="4" required>{{ note.content }}</textarea>
                                                </div>
                                                <div class="d-flex justify-content-between">
                                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#confirmUpdateModal">Save</button>
                                                        <a href="{% url 'secrets_notes' %}" class="btn btn-secondary ms-2" data-bs-toggle="tooltip" data-bs-placement="top" title="Go back without saving">Back</a>
                                                </div>
                                        </form>
                                        <!-- Confirmation Modal -->
                                        <div class="modal fade" id="confirmUpdateModal" tabindex="-1" aria-labelledby="confirmUpdateLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    <div class="modal-header bg-primary text-white">
                                                        <h5 class="modal-title" id="confirmUpdateLabel">Confirm Update</h5>
                                                <form method="post" id="editSecretNoteForm" autocomplete="off">
                                                    </div>
                                                    <div class="mb-4">
                                                        <label class="form-label fw-semibold text-primary" style="font-size:1.1em;">Title <span style="font-size:1.2em;">üè∑Ô∏è</span></label>
                                                        <input type="text" name="title" class="form-control form-control-lg text-center" value="{{ note.title }}" required style="border-radius:1rem;">
                                                    </div>
                                                    <div class="mb-4">
                                                        <label class="form-label fw-semibold text-primary" style="font-size:1.1em;">Content <span style="font-size:1.2em;">üóíÔ∏è</span></label>
                                                        <textarea name="content" class="form-control form-control-lg text-center" rows="4" required style="border-radius:1rem;">{{ note.content }}</textarea>
                                                    </div>
                                                    <div class="d-flex justify-content-between align-items-center mt-4">
                                                        <button type="button" class="btn w-50 py-2 fw-bold" style="background: linear-gradient(90deg, #8ec5fc 0%, #e0c3fc 100%); color:#fff; border:none; border-radius:1rem; font-size:1.1em;" data-bs-toggle="modal" data-bs-target="#confirmUpdateModal">
                                                            Save <span style="font-size:1.2em;">‚úèÔ∏è</span>
                                                        </button>
                                                        <a href="{% url 'secrets_notes' %}" class="btn btn-secondary w-25 py-2 ms-2" style="border-radius:1rem; font-size:1.1em;">
                                                            Back <span style="font-size:1.2em;">üîô</span>
                                                        </a>
                                                                                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
                                                                                <script>
                                                                                        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                                                                                        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                                                                                            return new bootstrap.Tooltip(tooltipTriggerEl);
                                                                                        });
                                                                                </script>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
